<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xfetch Pixel Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/pixel-base.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/scenes.css">
</head>
<body>
    <!-- 顶部状态栏 -->
    <header class="status-bar">
        <div class="title">
            <span class="logo">XFETCH</span>
            <span class="subtitle">PIXEL STUDIO</span>
        </div>
        <div class="stats">
            <div class="stat-item">
                <span class="stat-label">PROGRESS</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span class="stat-value" id="progress-text">0%</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">TIME</span>
                <span class="stat-value" id="elapsed-time">0.0s</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">TWEETS</span>
                <span class="stat-value"><span id="passed-count">0</span>/<span id="total-count">0</span></span>
            </div>
        </div>
        <div class="controls">
            <button class="pixel-btn" id="btn-load">LOAD</button>
            <button class="pixel-btn" id="btn-play" disabled>PLAY</button>
            <button class="pixel-btn" id="btn-history">HISTORY</button>
        </div>
    </header>

    <!-- 主游戏区域 - 单一场景，从左到右 -->
    <main class="game-container" id="game-container">
        <!-- 天空背景 -->
        <div class="sky"></div>

        <!-- 区域1: 排队审核区 (左侧) -->
        <div class="zone zone-queue" id="zone-queue">
            <div class="zone-label">REVIEW STOP</div>
            <div class="model-badge" id="model-analyzer">gemini-2.0-flash-lite</div>

            <!-- 排队区域 -->
            <div class="queue-area" id="queue-area">
                <!-- 小人会动态添加到这里 -->
            </div>
        </div>

        <!-- 区域2: 大巴停靠区 (中左) -->
        <div class="zone zone-bus" id="zone-bus">
            <!-- 大巴车 -->
            <div class="bus" id="bus">
                <div class="bus-roof">
                    <span class="bus-model" id="bus-model">gemini-2.5-flash</span>
                </div>
                <div class="bus-body">
                    <div class="bus-windows" id="bus-windows">
                        <!-- 乘客头像会动态添加 -->
                    </div>
                    <div class="bus-door"></div>
                </div>
                <div class="bus-wheels">
                    <div class="wheel"></div>
                    <div class="wheel"></div>
                </div>
            </div>
        </div>

        <!-- 区域3: 道路 (中间) -->
        <div class="zone zone-road" id="zone-road">
            <div class="road">
                <div class="road-line"></div>
            </div>
        </div>

        <!-- 区域4: 分拣建筑区 (右侧) -->
        <div class="zone zone-buildings" id="zone-buildings">
            <div class="zone-label">SORTING HUB</div>

            <!-- 建筑群 -->
            <div class="buildings" id="buildings">
                <div class="building" data-category="news" data-id="news">
                    <div class="building-roof"></div>
                    <div class="building-body">
                        <span class="building-label">NEWS</span>
                        <div class="building-door"></div>
                    </div>
                    <div class="building-count">0</div>
                </div>
                <div class="building" data-category="analysis" data-id="analysis">
                    <div class="building-roof"></div>
                    <div class="building-body">
                        <span class="building-label">DEEP</span>
                        <div class="building-door"></div>
                    </div>
                    <div class="building-count">0</div>
                </div>
                <div class="building" data-category="tips" data-id="tips">
                    <div class="building-roof"></div>
                    <div class="building-body">
                        <span class="building-label">TIPS</span>
                        <div class="building-door"></div>
                    </div>
                    <div class="building-count">0</div>
                </div>
                <div class="building" data-category="research" data-id="research">
                    <div class="building-roof"></div>
                    <div class="building-body">
                        <span class="building-label">LAB</span>
                        <div class="building-door"></div>
                    </div>
                    <div class="building-count">0</div>
                </div>
                <div class="building" data-category="product" data-id="product">
                    <div class="building-roof"></div>
                    <div class="building-body">
                        <span class="building-label">APP</span>
                        <div class="building-door"></div>
                    </div>
                    <div class="building-count">0</div>
                </div>
                <div class="building" data-category="business" data-id="business">
                    <div class="building-roof"></div>
                    <div class="building-body">
                        <span class="building-label">BIZ</span>
                        <div class="building-door"></div>
                    </div>
                    <div class="building-count">0</div>
                </div>
            </div>
        </div>

        <!-- 地面 (贯穿整个场景) -->
        <div class="ground-full"></div>

        <!-- 导向线 SVG (覆盖整个场景) -->
        <svg class="guide-lines" id="guide-lines"></svg>
    </main>

    <!-- 底部信息面板 -->
    <footer class="info-panel">
        <div class="panel-section current-review">
            <div class="panel-title">CURRENT</div>
            <div class="review-card" id="current-card">
                <div class="card-avatar" id="card-avatar"></div>
                <div class="card-info">
                    <div class="card-username" id="card-username">@waiting...</div>
                    <div class="card-content" id="card-content">Waiting for tweets...</div>
                    <div class="card-scores">
                        <span class="score relevance">REL: <span id="card-relevance">--</span></span>
                        <span class="score value">VAL: <span id="card-value">--</span></span>
                        <span class="score category">CAT: <span id="card-category">--</span></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel-section leaderboard">
            <div class="panel-title">TOP AUTHORS</div>
            <div class="leaderboard-list" id="leaderboard">
                <!-- 动态填充 -->
            </div>
        </div>

        <div class="panel-section category-stats">
            <div class="panel-title">CATEGORIES</div>
            <div class="category-bars" id="category-bars">
                <div class="category-bar" data-category="news">
                    <span class="cat-label">NEWS</span>
                    <div class="cat-bar-bg"><div class="cat-bar-fill" style="--cat-color: #ff6b6b"></div></div>
                    <span class="cat-count">0</span>
                </div>
                <div class="category-bar" data-category="analysis">
                    <span class="cat-label">DEEP</span>
                    <div class="cat-bar-bg"><div class="cat-bar-fill" style="--cat-color: #ffd93d"></div></div>
                    <span class="cat-count">0</span>
                </div>
                <div class="category-bar" data-category="tips">
                    <span class="cat-label">TIPS</span>
                    <div class="cat-bar-bg"><div class="cat-bar-fill" style="--cat-color: #6bcb77"></div></div>
                    <span class="cat-count">0</span>
                </div>
                <div class="category-bar" data-category="research">
                    <span class="cat-label">LAB</span>
                    <div class="cat-bar-bg"><div class="cat-bar-fill" style="--cat-color: #4d96ff"></div></div>
                    <span class="cat-count">0</span>
                </div>
                <div class="category-bar" data-category="product">
                    <span class="cat-label">APP</span>
                    <div class="cat-bar-bg"><div class="cat-bar-fill" style="--cat-color: #9d4edd"></div></div>
                    <span class="cat-count">0</span>
                </div>
                <div class="category-bar" data-category="business">
                    <span class="cat-label">BIZ</span>
                    <div class="cat-bar-bg"><div class="cat-bar-fill" style="--cat-color: #ff8c42"></div></div>
                    <span class="cat-count">0</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- 悬浮气泡 -->
    <div class="tooltip" id="tooltip"></div>

    <!-- 文件选择对话框 -->
    <div class="modal hidden" id="file-modal">
        <div class="modal-content">
            <div class="modal-title">SELECT EVENT FILE</div>
            <div class="file-list" id="file-list">
                <!-- 动态填充 -->
            </div>
            <div class="modal-actions">
                <button class="pixel-btn" id="btn-close-modal">CANCEL</button>
            </div>
        </div>
    </div>

    <!-- 脚本 -->
    <script src="js/utils/pixel-art.js"></script>
    <script src="js/utils/animation.js"></script>
    <script src="js/sprites/person.js"></script>
    <script src="js/sprites/bus.js"></script>
    <script src="js/sprites/building.js"></script>
    <script src="js/data-loader.js"></script>
    <script src="js/event-player.js"></script>
    <script src="js/scene/review-stop.js"></script>
    <script src="js/scene/tweet-bus.js"></script>
    <script src="js/scene/sorting-hub.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
